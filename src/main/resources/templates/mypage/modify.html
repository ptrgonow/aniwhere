<!DOCTYPE html>
<div th:replace="~{include/header :: header}"></div>
<script src="https://developers.kakao.com/sdk/js/kakao.min.js"></script>
<link rel="stylesheet" href="/css/mypage.css">
<input type="hidden" id="hiddenUserId" th:value="${userId}">
<input type="hidden" id="hiddenUserName" th:value="${detail.userName}">
<input type="hidden" id="hiddenUserPhone" th:value="${detail.phone}">
<input type="hidden" id="hiddenSocial" th:value="${isSocial}">


<body>
<!-- breadcrumb-section -->
<div class="breadcrumb-section breadcrumb-bg">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 offset-lg-2 text-center">
                <div class="breadcrumb-text">
                    <p>내 정보 수정</p>
                    <h1>MyPage</h1>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="page-wrapper">
    <div class="container d-flex justify-content-center">
        <div class="join col-xl-8 col-8 d-flex justify-content-center w-100 h-100">
            <form id="joinForm" method="post" th:action="@{/mypage/update}">
                <h3 class="reg-text"><span class="material-symbols-outlined">person_edit</span>내 정보 수정</h3>
                <div class="modi-form">
                    <div class="form-input" id="pwdForm">
                        <label for="userPwd" class="reg-form" id="nowPwd">현재 비밀번호</label>
                        <input type="password" id="userPwd" name="userPwd" class="in-text">
                        <button type="button" class="pwd-con" id="checkButton">확인</button>
                    </div>
                    <p class="pwd-info">* 내 정보를 변경하실 경우 현재 비밀번호를 입력하세요</p>
                    <div class="form-input" th:if="${!isSocial}">
                        <label for="userPwd" class="reg-form" id="newPwd">변경할 비밀번호</label>
                        <input type="password" id="userNewPwd" name="userPwd" class="in-text">
                    </div>
                    <div class="form-input" th:if="${!isSocial}">
                        <label for="userPwd" class="reg-form" id="confirmPwd">변경할 비밀번호<br/> 확인</label>
                        <input type="password" id="confirmNewPwd" name="userPwd" class="in-text">
                        <div id="pwd-message" class="pwd-message"></div>
                    </div>
                    <div class="form-input">
                        <label for="userName" class="reg-form">이름</label>
                        <input type="text" id="userName" name="userName" maxlength="8" class="in-text" th:value="${isSocial ? name : detail.userName}" required>
                        <div id="name-message" class="name-message"></div>
                    </div>
                    <div class="form-input">
                        <label for="email" class="reg-form">이메일</label>
                        <input type="text" id="email" name="email" class="in-text" th:value="${detail.email}" readonly>
                    </div>
                    <div class="form-input">
                        <label for="address" class="reg-form">주소</label>
                        <div class="address-inputs">
                            <input type="text" id="address" name="address" class="in-text" th:value="${detail.address}">
                            <input type="text" id="detailAddress" name="detailAddress" class="in-text" th:value="${detail.detailAddress}">
                            <input type="text" id="zipCode" name="zipCode" class="in-text" th:value="${detail.zipCode}" required>
                        </div>
                        <div class="address-buttons">
                            <button type="button" id="searchAddress" onclick="searchAdd()">주소검색</button>
                        </div>
                    </div>
                    <div class="form-input">
                        <label for="phone" class="reg-form">휴대폰</label>
                        <input type="text" id="phone" name="phone" class="in-text" maxlength="13" th:value="${detail.phone}" required>
                        <div id="phone-message" class="phone-message"></div>
                    </div>
                    <div class="mypage-btn">
                        <button id="modi-btn" type="button" class="modi">수정완료</button>
                        <button id="del-btn" type="button" class="del">회원탈퇴</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
</body>

<div th:replace="~{include/footer :: footer}"></div>
<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
<script src="/js/mypage.js"></script>